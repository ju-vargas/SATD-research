----- MÁQUINA DE ESTADOS UNIDADE DE CONTROLE ------ 
//controla os sinais de enable e disable
//tambem controla o shift dos registradores em que os valores de entrada são armazenados 

    in: 
        //nao tem sinal de entrada pq é o controle de tudo     
        clk
        
    out:
        ENABLE_DIFFERENCES
        ENABLE_HT_HORIZONTAL
        ENABLE_SHIFT_BUFFER
        ENABLE_HT_VERTICAL
        ENABLE_ABSOLUTE
        ENABLE_SUM
    
        LOAD_REG_CUR 
        LOAD_REG_ORG

    if (reset):
        ENABLE_DIFFERENCES    <= 0    
        ENABLE_HT_HORIZONTAL  <= 0
        ENABLE_SHIFT_BUFFER   <= 0
        ENABLE_HT_VERTICAL    <= 0
        ENABLE_ABSOLUTE       <= 0 
        ENABLE_SUM            <= 0
        LOAD_REG_CUR          <= 0 
        LOAD_REG_ORG          <= 0

        //

        STATE                 <= 0
    
    else:
        case (STATE):
            state_0:
                -- output --
                LOAD_REG_CUR  <= 1 
                LOAD_REG_ORG  <= 1
                

                -- transition -- 
                STATE <= state_1

            state_1: 
                -- output --
                LOAD_REG_CUR  <= 0
                LOAD_REG_ORG  <= 0
                
                ENABLE_DIFFERENCES   <= not(ENABLE_DIFFERENCES) 
                //habilitei nesse estado, no proximo estado comeca a fazer

                -- transition -- 
                STATE <= state_2

            state_2:
                -- output --
                ENABLE_HT_HORIZONTAL <= not(ENABLE_HT_HORIZONTAL) 
                //habilitei nesse estado, no próximo estado começa a fazer
                -- transition --
                

    

            state_3:
                -- output --
                -- transition --

            state_4:
                -- output --
                -- transition --
        

=========================================================================
        
        if(ENABLE_HT_HORIZONTAL):
            ht_horizontal (reg_differences)
            //mas nao quero acessar nova várias vezes
            //n pode perder o progresso dos estados
        if(ENABLE_DIFFERENCES):
            REG_DIFFERENCES <= REG_ORG[] - REG_CUR[] 
            REG_ORG[]       <= REG_ORG[-]
            REG_CUR[]       <= REG_CUR[-]

